module.exports.start = function($happn, callback) {

  // $happn.log.info('Starting my www component.');

  var terminal, address, url;

  address = $happn.info.datalayer.address;
  url = 'http://'+address.address+':'+address.port;

  if (terminal = $happn.exchange.terminal) {                   // TODO
    terminal.register('www', {                                // for various browsers: open in same tab
      description: '(osx) Open browser to the www module.',  // get actual not default port in here
      run: function(args, callback) {                       //
        require('child_process').exec('open ' + url, function(e) {
          callback(e);
        });
      }
    });
  }

  callback(null); 
}

module.exports.stop = function($happn, callback) {

  // $happn.log.info('Stopping my www component.');
  callback(null);
    
}

module.exports.exampleExchangeMethod = function($happn, arg, callback) {

  callback(null, 'Hello ' + arg);

}

// happner default for this module

module.exports.$happner = {
  config: {
    component: {
      startMethod: 'start',
      stopMethod: 'stop',
      schema: {
        exclusive: true,
        methods: {
          'start': {},
          'stop': {},
          'exampleExchangeMethod': {
            alias: 'example' // called from client in client.exchange.www.example()
          }
        }
      },
      web: {
        routes: {
          static: 'static'
        }
      }
    }
  }
}
